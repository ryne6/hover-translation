# PRD: 极简视觉改造计划

## 背景
- 现有界面广泛使用蓝紫渐变、彩色图标与多层阴影，整体观感偏花哨，与期望的极简、克制风格不符。
- 交互面（悬浮翻译框、Popup、Options）色彩体系不统一，按钮风格、标题颜色等存在差异，导致体验割裂。
- 新目标参考 [antfu.me](https://antfu.me/) 的设计语言：淡化视觉干扰、突出内容本身，让界面更轻、更静。

## 目标
1. 构建统一的极简视觉基线：文本主色 `#555555`、标题 `#000000`、背景 `#EFEFEF`。
2. 去除高饱和渐变、重阴影，采用朴素的灰度配色与极简边框按钮（默认描边 `#888D96`，hover 时背景 `#FFFFFF`、去掉额外描边效果）。
3. 确保所有前端界面（悬浮框、Popup、Options、文案提示等）遵循同一套色板和排版节奏，保持功能完整。

## 设计规范
- **色彩**
  - 主文本：`#555555`
  - 标题/关键信息：`#000000`
  - 悬浮框/主要面板背景：`#EFEFEF`
  - 次要背景（页面底色、面板内分区）：`#F6F6F6`
  - 按钮边框/文字：`#888D96`
  - 状态色（success / warning / error）降饱和仍保留基础含义，例如 `#6CB37C` / `#CFA26B` / `#C97A7A`
- **排版**
  - 字体沿用系统字体族，但减少粗体使用，标题 `font-weight: 600`，正文 `400`。
  - 行高保持 1.6 左右，留出足够留白。
- **组件**
  - 按钮全部采用描边样式（`border: 1px solid #888D96`），圆角减小为 4px 左右。
  - 输入框、选择器同样使用灰度描边，focus 时仅改变边框色为 `#555555`，不再出现蓝色阴影。
  - 移除所有渐变背景、彩色图标、过度的阴影，仅保留轻微的 `box-shadow: 0 2px 6px rgba(0,0,0,0.08)`（必要时）。
  - 悬浮翻译框背景改为 `#EFEFEF`，文字、按钮按新规范展示。

## 范围
### 必须改造的模块
1. **全局变量**：`src/styles/variables.css`
   - 替换主色系、文本色、背景色、按钮/边框色定义。
   - 校正 shadow、radius 等与极简风格不符的变量。
2. **悬浮翻译框**
   - 样式文件：`src/styles/hover-box.css`
   - 组件逻辑：`src/content/hover-box.js`（确保新色值写入、状态提示仍可见）。
3. **内容脚本公共样式**：`src/styles/content.css`
4. **Popup**
   - 结构文件：`src/popup/popup.html`
   - 样式：`src/popup/popup.css`
   - 行为：`src/popup/popup.js`（提示/通知颜色需同步调整）。
5. **Options 页面**
   - 结构 `src/options/options.html`
   - 样式 `src/options/options.css`
   - 行为 `src/options/options.js`（成功/错误提示颜色、按钮 class）。
6. **共享元素**
   - `src/styles/variables.css` 触发后可能影响 `src/styles/hover-box.css`、`content.css`、`popup.css`、`options.css` 之外使用变量的其他文件（如 `src/styles/variables.css` 被 `options.css` 以 `@import` 方式使用）。
   - 通知提示（`showNotification`）颜色字串、图标若使用彩色元素需要调整。
7. **静态资源**
   - 若有蓝紫色的图标（如 `assets/icons` 内渐变图），需清理或用灰阶版本替换（最终统一为简约线性图标，后续迭代可再补充）。

### 需要留意的非样式影响
- Toast / Alert 颜色：`src/shared/utils.js` 中 `showNotification` 可能使用状态色，需要同步降饱和。
- 测试截图（若存在 UI Snapshot）目前 repo 内仅单元测试，无需更新。
- 打包产物 `dist/` 会因 css 更改而不同，不用提交，但应确保构建通过。

### 不在此次范围
- 功能逻辑、API 管理、翻译适配器等业务代码。
- 深色模式（暂不支持，也不在此次 PRD 范围）。
- 图标重绘（除非颜色与新设计冲突，可后续逐步替换）。

## 验收标准
1. 所有界面使用统一灰度色板：检查悬浮框、Popup、Options 三处无蓝紫渐变或高饱和颜色残留。
2. 按钮均为描边样式，hover 仅改变背景色为白色，focus 无额外高亮边框。
3. 标题文本为 `#000000`，正文为 `#555555`，代码块/提示一致。
4. 构建、测试 (`npm test`) 通过，无 UI 功能回归（翻译、配置、验证、复制等）。
5. 手动验证 Checklist：
   - 悬浮框：翻译显示、按钮交互（复制/发音/关闭）可用，颜色符合规范。
   - Popup：主界面、保存提示颜色统一。
   - Options：导航、表单控件、统计卡片、按钮遵循新设计。

## 依赖
- 无新增 npm 依赖。
- 需要 Chrome 扩展本地加载验证最终效果。

## 时间预估
1. 规范落地（变量 & 公共样式）：0.5 天
2. 悬浮框调整与验证：0.5 天
3. Popup/Options 重构：1 天
4. 联调 & 手动回归：0.5 天

## 风险
- 变量覆写范围广，需确认所有引用链，避免遗漏或导致文字对比度不足。
- 某些第三方 API 提示可能依赖彩色提示，需要替换为符号/文字区别。
- Web Speech 播放按钮在灰背景下可读性、点击热区需回归确认。

## 里程碑
1. **M1**：完成变量与公共组件 CSS 调整，悬浮框已符合新规范。
2. **M2**：Popup、Options 页面 UI 全部替换为简约风格。
3. **M3**：回归测试与代码清理（去掉未使用渐变变量等）。
